server:
  port: 8080
  servlet:
    session:
      cookie:
        # SAML認証フローではIdPからのPOSTでCookieが必要なため、SameSite=None + Secure=true を推奨
        # ローカル開発環境（HTTPS）では None + Secure が適切
        # HTTP環境では Lax + Secure=false を使用
        same-site: ${SESSION_COOKIE_SAME_SITE:none}
        secure: ${SESSION_COOKIE_SECURE:true}
        # SAML認証フローに十分な時間を確保するため、セッション有効期限を延長
        max-age: ${SESSION_COOKIE_MAX_AGE:1800}
      # セッションタイムアウトを延長（SAML認証フローに時間がかかる場合があるため）
      timeout: ${SESSION_TIMEOUT:30m}
  # Honor X-Forwarded-* from nginx so SAML destinations use https://localhost
  forward-headers-strategy: framework

spring:
  application:
    name: saml-backend
  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.saml2.Saml2RelyingPartyAutoConfiguration
  jackson:
    default-property-inclusion: non_null

app:
  frontend-base-url: ${APP_FRONTEND_BASE_URL:http://localhost:3000}
  saml:
    enabled: ${SAML_ENABLED:false}
    metadata-uri: ${SAML_IDP_METADATA_URI:}
    entity-id: ${SAML_ENTITY_ID:http://localhost:8080/saml2/service-provider-metadata/entra}

logging:
  level:
    org.springframework.security.saml2: DEBUG
    org.springframework.security: INFO
    com.example.saml: DEBUG
